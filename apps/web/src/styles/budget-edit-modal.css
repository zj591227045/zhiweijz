/* 预算编辑模态框专用样式 */

/* 确保模态框在最顶层且不受其他元素影响 */
.budget-edit-modal {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 9999 !important;
  pointer-events: auto !important;
  isolation: isolate !important;
  /* 确保不受父容器影响 */
  transform: translateZ(0) !important;
  -webkit-transform: translateZ(0) !important;
  /* 确保在所有设备上都能正确显示 */
  -webkit-backface-visibility: hidden !important;
  backface-visibility: hidden !important;
  /* 背景模糊效果 */
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  background-color: rgba(0, 0, 0, 0.5) !important;
}

/* 模态框容器 */
.budget-edit-modal .app-container {
  background: var(--background-color, #f8fafc) !important;
  position: relative !important;
  display: flex !important;
  flex-direction: column !important;
  /* 确保容器占满整个视口 */
  width: 100vw !important;
  height: 100vh !important;
  max-width: none !important;
  margin: 0 !important;
  overflow: hidden !important;
}

/* iOS SafeArea适配的头部样式 */
.budget-edit-modal .header {
  background: var(--card-background, #ffffff) !important;
  border-bottom: 1px solid var(--border-color, #e5e7eb) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  padding: 12px 20px !important;
  flex-shrink: 0 !important;
  position: relative !important;
  z-index: 10 !important;
  /* 基础高度 */
  min-height: 60px !important;
  height: 60px !important;
}

/* iOS设备的SafeArea适配 */
@supports (padding: max(0px)) {
  .ios-app .budget-edit-modal .header,
  .capacitor-ios .budget-edit-modal .header,
  body.ios-app .budget-edit-modal .header,
  body.capacitor-ios .budget-edit-modal .header {
    /* 适配SafeArea顶部 */
    padding-top: calc(env(safe-area-inset-top, 0px) + 12px) !important;
    height: calc(60px + env(safe-area-inset-top, 0px)) !important;
    min-height: calc(60px + env(safe-area-inset-top, 0px)) !important;
  }
}

/* 主内容区域 */
.budget-edit-modal .main-content {
  flex: 1 !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch !important;
  position: relative !important;
  /* 基础高度计算 */
  height: calc(100vh - 60px) !important;
  max-height: calc(100vh - 60px) !important;
}

/* iOS设备的主内容区域SafeArea适配 */
@supports (padding: max(0px)) {
  .ios-app .budget-edit-modal .main-content,
  .capacitor-ios .budget-edit-modal .main-content,
  body.ios-app .budget-edit-modal .main-content,
  body.capacitor-ios .budget-edit-modal .main-content {
    /* 减去头部的完整高度（包含SafeArea） */
    height: calc(100vh - 60px - env(safe-area-inset-top, 0px)) !important;
    max-height: calc(100vh - 60px - env(safe-area-inset-top, 0px)) !important;
    /* 底部SafeArea适配 */
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 20px) !important;
  }
}

/* 表单容器 */
.budget-edit-modal .main-content > div {
  padding: 20px 20px 0 20px !important;
  min-height: 100% !important;
}

/* 预算表单样式 */
.budget-edit-modal .budget-form {
  display: flex !important;
  flex-direction: column !important;
  gap: 24px !important;
  padding-bottom: 40px !important; /* 确保最后一个元素有足够的底部空间 */
}

/* 表单区块样式 */
.budget-edit-modal .form-section {
  background: var(--card-background, #ffffff) !important;
  border: 1px solid var(--border-color, #e5e7eb) !important;
  border-radius: var(--border-radius, 12px) !important;
  padding: 20px !important;
  box-shadow: var(--card-shadow, 0 1px 3px rgba(0, 0, 0, 0.1)) !important;
}

/* 提交按钮样式 */
.budget-edit-modal .submit-button {
  width: 100% !important;
  padding: 16px !important;
  background-color: var(--primary-color, #3b82f6) !important;
  color: white !important;
  border: none !important;
  border-radius: var(--border-radius, 12px) !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: background-color 0.2s ease !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px !important;
  min-height: 48px !important;
}

.budget-edit-modal .submit-button:hover:not(:disabled) {
  background-color: var(--primary-color-dark, #2563eb) !important;
}

.budget-edit-modal .submit-button:disabled {
  opacity: 0.6 !important;
  cursor: not-allowed !important;
}

/* 确保在键盘弹出时内容仍然可滚动 */
@media (max-height: 600px) {
  .budget-edit-modal .main-content {
    /* 在小屏幕或键盘弹出时确保滚动 */
    overflow-y: scroll !important;
  }
}

/* 移动设备特定优化 */
@media (max-width: 768px) {
  .budget-edit-modal .main-content {
    /* 强制启用滚动 */
    overflow-y: scroll !important;
    -webkit-overflow-scrolling: touch !important;
    /* 确保在移动设备上滚动流畅 */
    scroll-behavior: smooth;
    /* 防止滚动时的弹跳效果影响模态框 */
    overscroll-behavior: contain;
  }
}

/* 确保模态框内容区域有足够的空间进行滚动 */
.budget-edit-modal .main-content > * {
  /* 防止子元素阻止滚动 */
  flex-shrink: 0;
}

/* 修复可能的z-index冲突 */
.budget-edit-modal .main-content {
  position: relative;
  z-index: 1;
}

/* 隐藏底层页面的滚动条，但保持模态框内的滚动 */
body.modal-open {
  overflow: hidden !important;
  /* 防止iOS上的橡皮筋效果影响模态框 */
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
}

/* 强制隐藏所有可能的工具栏 */
body.modal-open .header:not(.budget-edit-modal .header),
body.modal-open .page-header:not(.budget-edit-modal .header),
body.modal-open .ios-header:not(.budget-edit-modal .header),
body.modal-open .capacitor-header:not(.budget-edit-modal .header),
body.modal-open .top-bar:not(.budget-edit-modal .header),
body.modal-open .navigation-header:not(.budget-edit-modal .header),
body.modal-open .app-header:not(.budget-edit-modal .header),
body.modal-open .bottom-nav,
body.modal-open .bottom-navigation,
body.modal-open .tab-bar {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
}


