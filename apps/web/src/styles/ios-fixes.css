/* iOS Capacitor 专用样式修复 */
/* 基于搜索结果中的proven方法：状态栏模糊 + 背景延伸 */

/* 移除导致主题切换器被遮挡的覆盖层 */

/* iOS基础样式 - 保持安全区域适配 */
.ios-app body {
  margin: 0 !important;
  padding: 0 !important;
}

/* iOS登录页面防滚动样式 */
.ios-app.login-page body {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
  touch-action: none !important;
  -webkit-overflow-scrolling: none !important;
}

.ios-app.login-page html {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
  touch-action: none !important;
  -webkit-overflow-scrolling: none !important;
}

/* 登录页面容器样式 */
.ios-app .ios-login-container {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  overflow: hidden !important;
  -webkit-overflow-scrolling: none !important;
  touch-action: none !important;
}

/* 登录页面内容区域 - 确保内容避开安全区域但背景延伸 */
.ios-app .ios-login-container .auth-container {
  height: 100vh !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
  /* 内容避开安全区域 */
  padding-top: env(safe-area-inset-top, 0px) !important;
  padding-left: env(safe-area-inset-left, 0px) !important;
  padding-right: env(safe-area-inset-right, 0px) !important;
  /* 底部不添加padding，让背景延伸 */
}

/* iOS主题切换器位置调整 - 确保不被灵动岛遮挡 */
.ios-app .theme-switcher {
  margin-top: 1rem !important;
}

/* 输入框保持正常的触摸行为 */
.ios-app .ios-login-container input,
.ios-app .ios-login-container button {
  touch-action: manipulation !important;
}

/* 非登录页面能够正常滚动 */
.ios-app:not(.login-page) body {
  overflow: auto !important;
  position: static !important;
  width: auto !important;
  height: auto !important;
  touch-action: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

.ios-app:not(.login-page) html {
  overflow: auto !important;
  position: static !important;
  width: auto !important;
  height: auto !important;
  touch-action: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* 动态背景组件延伸到全屏 */
.ios-app .fixed.inset-0.-z-10 {
  top: calc(-1 * env(safe-area-inset-top, 0px)) !important;
  bottom: calc(-1 * env(safe-area-inset-bottom, 0px)) !important;
  left: calc(-1 * env(safe-area-inset-left, 0px)) !important;
  right: calc(-1 * env(safe-area-inset-right, 0px)) !important;
}

/* iOS应用容器背景延伸 */
.ios-app .app-container {
  position: relative !important;
  min-height: 100vh !important;
}

/* 确保iOS页面容器也能正确处理安全区域 */
.ios-app .ios-page-container {
  position: relative !important;
  min-height: 100vh !important;
}

/* 通过伪元素让背景延伸到安全区域 */
.ios-app .app-container::before,
.ios-app .ios-page-container::before {
  content: '' !important;
  position: fixed !important;
  top: calc(-1 * env(safe-area-inset-top, 0px)) !important;
  bottom: calc(-1 * env(safe-area-inset-bottom, 0px)) !important;
  left: calc(-1 * env(safe-area-inset-left, 0px)) !important;
  right: calc(-1 * env(safe-area-inset-right, 0px)) !important;
  background: var(--background-color, #f9fafb) !important;
  z-index: -1 !important;
  pointer-events: none !important;
}

/* 暗色主题支持 */
.dark .ios-app .app-container::before,
.dark .ios-app .ios-page-container::before {
  background: var(--background-color, #111827) !important;
}

/* iOS底部元素位置保持不变 - 确保组件不下移 */
.ios-app .ios-login-container .auth-container > *:last-child {
  /* 底部版权信息等元素位置保持原样，不受底部安全区域影响 */
  margin-bottom: 0 !important;
  padding-bottom: env(safe-area-inset-bottom, 0px) !important;
}

/* iOS 安全区域精确适配 */
/* 顶部标题栏适配 */
.ios-app .header,
.ios-app .page-header {
  padding-top: env(safe-area-inset-top, 0px) !important;
  background-color: var(--card-background) !important;
  border-bottom: 1px solid var(--border-color) !important;
  min-height: calc(56px + env(safe-area-inset-top, 0px)) !important;
}

/* 主要内容区域适配 */
.ios-app .main-content {
  padding-top: calc(56px + env(safe-area-inset-top, 0px)) !important;
  padding-bottom: calc(56px + env(safe-area-inset-bottom, 0px) + 8px) !important;
}

/* 底部导航栏适配 */
.ios-app .bottom-nav {
  padding-bottom: env(safe-area-inset-bottom, 0px) !important;
  height: calc(56px + env(safe-area-inset-bottom, 0px)) !important;
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
}

/* iOS头部样式优化 */
.ios-app .ios-header {
  position: sticky !important;
  top: 0 !important;
  z-index: 200 !important;
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
}

/* 确保非登录页面能够正常滚动，并使用proven方法延伸背景 */
.ios-app:not(.login-page) .main-content {
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* iOS页面主体背景延伸到全屏 */
.ios-app body {
  /* 让body背景延伸到全屏，但不影响内容定位 */
  margin: 0 !important;
  padding: 0 !important;
} 