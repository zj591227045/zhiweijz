# 预算表单功能

## 概述

新版web界面已成功迁移了添加和编辑预算的页面，基于旧版web界面的设计，并根据移动端操作逻辑进行了美化，使用了新版web界面的统一规范。

## 功能特性

### 1. 预算表单组件
- **基本信息设置**: 预算名称、预算金额
- **账本选择**: 支持个人账本和家庭账本选择
- **时间设置**: 开始日期、结束日期、无期限预算选项
- **分类预算**: 可选的分类预算功能，支持为不同支出分类设置预算

### 2. 页面路由
- **添加预算**: `/budgets/add`
- **编辑预算**: `/budgets/[id]/edit`

### 3. 状态管理
- 使用 Zustand 进行状态管理
- 支持表单验证和错误处理
- 支持创建和编辑两种模式

### 4. 样式设计
- 遵循新版web界面的设计规范
- 响应式设计，适配移动端操作
- 统一的颜色主题和组件样式

## 技术实现

### 组件结构
```
apps/web/src/components/budgets/budget-form/
├── budget-form.tsx              # 主表单组件
├── basic-info-section.tsx       # 基本信息组件
├── account-book-section.tsx     # 账本选择组件
├── time-settings-section.tsx    # 时间设置组件
└── category-budget-section.tsx  # 分类预算组件
```

### 状态管理
```
apps/web/src/store/budget-form-store.ts  # 预算表单状态管理
```

### 样式文件
```
apps/web/src/styles/budget-form.css      # 预算表单样式
```

### 页面组件
```
apps/web/src/app/budgets/add/page.tsx           # 添加预算页面
apps/web/src/app/budgets/[id]/edit/page.tsx     # 编辑预算页面
```

## 使用方法

### 添加预算
1. 在预算列表页面点击右上角的"+"按钮
2. 或者在通用预算页面点击"添加通用预算"按钮
3. 填写预算信息并保存

### 编辑预算
1. 在预算列表页面点击预算卡片的编辑按钮
2. 修改预算信息并保存

## 功能特点

### 表单验证
- 预算名称：必填，最大50个字符
- 预算金额：必须大于0
- 开始日期：必填
- 结束日期：非无期限预算时必填，且不能早于开始日期
- 账本选择：必选
- 分类预算：启用时至少添加一个分类预算，总额不能超过预算总额

### 分类预算功能
- 可选择启用分类预算
- 支持为不同支出分类设置预算金额
- 实时显示预算分配情况
- 支持添加和删除分类预算

### 用户体验
- 实时表单验证和错误提示
- 加载状态显示
- 响应式设计
- 统一的视觉风格

## 依赖项

- React 18.3.1
- Next.js 14.0.0
- Zustand 5.0.5
- @tanstack/react-query
- dayjs 1.11.13
- sonner 2.0.3 (用于消息提示)

## 注意事项

1. 确保后端API支持预算的创建和编辑功能
2. 需要正确配置React Query Provider
3. 样式文件需要在全局CSS中正确导入
4. 确保FontAwesome图标库已正确加载 