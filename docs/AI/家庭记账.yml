app:
  description: è®°è´¦ç®¡å®¶
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: å®¶åº­è®°è´¦
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/siliconflow:0.0.8@217f973bd7ced1b099c2f0c669f1356bdf4cc38b8372fd58d7874f9940b95de3
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.0.19@91aa4a80bd31d45b8fa37b27adcb3fb732f42aa4c91958225f20dc0189839048
kind: app
version: 0.2.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: 88af3c08-8c21-4698-b4b1-eac82b6c0c9a
    name: Nocobase_URL
    selector:
    - env
    - Nocobase_URL
    value: http://10.255.0.97:13000
    value_type: string
  - description: ''
    id: 53ae7863-88ed-460d-81ef-5735dd15c2f5
    name: Nocobase_API
    selector:
    - env
    - Nocobase_API
    value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsInJvbGVOYW1lIjoiYWRtaW4iLCJpYXQiOjE3NDY1NDUxMjMsImV4cCI6MzMzMDQxNDUxMjN9.MwSEq2aGv7nDwxlccdcD0ESFqbQSCloRTdXyZ1ohmh0
    value_type: string
  features:
    file_upload:
      allowed_file_extensions: []
      allowed_file_types:
      - image
      - document
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1746546036659-source-1746546784219-target
      selected: false
      source: '1746546036659'
      sourceHandle: source
      target: '1746546784219'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1746546784219-source-1746547918808-target
      selected: false
      source: '1746546784219'
      sourceHandle: source
      target: '1746547918808'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1746548329821-source-1746548495304-target
      selected: false
      source: '1746548329821'
      sourceHandle: source
      target: '1746548495304'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: code
      id: 1746549541358-source-17465495921760-target
      selected: false
      source: '1746549541358'
      sourceHandle: source
      target: '17465495921760'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: parameter-extractor
      id: 1746549859456-source-1746549934072-target
      selected: false
      source: '1746549859456'
      sourceHandle: source
      target: '1746549934072'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: parameter-extractor
      id: 1746548495304-source-1746550318698-target
      selected: false
      source: '1746548495304'
      sourceHandle: source
      target: '1746550318698'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: template-transform
      id: 1746547918808-false-1746550450564-target
      selected: false
      source: '1746547918808'
      sourceHandle: 'false'
      target: '1746550450564'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: variable-aggregator
      id: 1746550450564-source-1746550371697-target
      selected: false
      source: '1746550450564'
      sourceHandle: source
      target: '1746550371697'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: parameter-extractor
        targetType: tool
      id: 1746550318698-source-1746549486512-target
      source: '1746550318698'
      sourceHandle: source
      target: '1746549486512'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: parameter-extractor
        targetType: http-request
      id: 1746550318698-source-1746551904312-target
      source: '1746550318698'
      sourceHandle: source
      target: '1746551904312'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 17465495921760-source-1746552052543-target
      source: '17465495921760'
      sourceHandle: source
      target: '1746552052543'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1746552052543-source-1746552392497-target
      source: '1746552052543'
      sourceHandle: source
      target: '1746552392497'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1746551904312-source-1746552876412-target
      source: '1746551904312'
      sourceHandle: source
      target: '1746552876412'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1746552876412-source-1746552975531-target
      source: '1746552876412'
      sourceHandle: source
      target: '1746552975531'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1746552392497-source-1746552975531-target
      source: '1746552392497'
      sourceHandle: source
      target: '1746552975531'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: parameter-extractor
        targetType: http-request
      id: 1746549934072-source-1746552975531-target
      source: '1746549934072'
      sourceHandle: source
      target: '1746552975531'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1746552975531-source-1746581525468-target
      source: '1746552975531'
      sourceHandle: source
      target: '1746581525468'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: answer
      id: 1746581525468-source-answer-target
      source: '1746581525468'
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1746545680501-source-1746594655609-target
      source: '1746545680501'
      sourceHandle: source
      target: '1746594655609'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1746594655609-source-1746546036659-target
      source: '1746594655609'
      sourceHandle: source
      target: '1746546036659'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1746547918808-true-1746595346612-target
      source: '1746547918808'
      sourceHandle: 'true'
      target: '1746595346612'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1746595346612-source-1746550371697-target
      source: '1746595346612'
      sourceHandle: source
      target: '1746550371697'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: parameter-extractor
        targetType: tool
      id: 1746550318698-source-1746549859456-target
      source: '1746550318698'
      sourceHandle: source
      target: '1746549859456'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: variable-aggregator
        targetType: question-classifier
      id: 1746550371697-source-1746597069745-target
      source: '1746550371697'
      sourceHandle: source
      target: '1746597069745'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: http-request
      id: 1746597069745-1-1746548329821-target
      source: '1746597069745'
      sourceHandle: '1'
      target: '1746548329821'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: tool
      id: 1746549486512-source-1746549541358-target
      source: '1746549486512'
      sourceHandle: source
      target: '1746549541358'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables: []
      height: 54
      id: '1746545680501'
      position:
        x: 30
        y: 311
      positionAbsolute:
        x: 30
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'è®°è´¦ä¿¡æ¯{{#1746581525468.result#}}ï¼

          æ—¥æœŸï¼š{{#1746549934072.LiuShui_Date#}}

          æ˜ç»†ï¼š{{#1746550318698.Name#}}

          æ–¹å‘ï¼š{{#1746550318698.Type#}}ï¼›åˆ†ç±»ï¼š{{#1746550318698.class#}}ï¼›

          é‡‘é¢ï¼š{{#1746550318698.JinE#}}ï¼Œé¢„ç®—ï¼š{{#17465495921760.result#}}'
        desc: ''
        selected: false
        title: ç›´æ¥å›å¤
        type: answer
        variables: []
      height: 232
      id: answer
      position:
        x: 5502
        y: 493
      positionAbsolute:
        x: 5502
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - type: text
            value: ''
          type: none
        desc: ''
        headers: 'Accept:application/json

          Authorization:Bearer {{#env.Nocobase_API#}}

          X-Locale:zh-CN

          X-Role:root'
        method: get
        params: 'pageSize:20

          appends[]:roles

          page:1

          filter:{"$and":[{"nickname":{"$eq":"{{#1746594655609.result#}}"}}]}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–ç”¨æˆ·ä¿¡æ¯
        type: http-request
        url: '{{#env.Nocobase_URL#}}/api/users:list'
        variables: []
      height: 126
      id: '1746546036659'
      position:
        x: 638
        y: 311
      positionAbsolute:
        x: 638
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport re\n\ndef main(json_str: str, uuid: str = None)\
          \ -> dict:\n    # æ£€æŸ¥uuidæ˜¯å¦ä¸ºç‰¹å®šå€¼\n    if uuid == \"b7ee9ba3-efe1-41ba-a278-a45752600a2b\"\
          :\n        # å¦‚æœuuidåŒ¹é…ï¼Œç›´æ¥è¿”å›IDä¸º1\n        return {'result': \"1\"}\n    \n\
          \    # å¦‚æœuuidä¸åŒ¹é…ï¼Œæ‰§è¡ŒåŸæ¥çš„é€»è¾‘\n    try:\n        # é¦–å…ˆå°è¯•è§£æè¾“å…¥çš„json_str\n      \
          \  data = None\n        \n        # å°è¯•ç›´æ¥è§£æ\n        try:\n            parsed_data\
          \ = json.loads(json_str)\n            \n            # æ£€æŸ¥æ˜¯å¦æœ‰åµŒå¥—çš„json_strå­—æ®µ\n\
          \            if \"json_str\" in parsed_data:\n                try:\n   \
          \                 # å°è¯•è§£æåµŒå¥—çš„json_str\n                    inner_data = json.loads(parsed_data[\"\
          json_str\"])\n                    data = inner_data\n                except:\n\
          \                    # å¦‚æœåµŒå¥—çš„json_strä¸æ˜¯æœ‰æ•ˆJSONï¼Œå¯èƒ½æ˜¯å­—ç¬¦ä¸²å½¢å¼\n                \
          \    # å°è¯•ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–ID\n                    id_pattern = r'\"id\"?\\s*:\\s*(\\\
          d+)'\n                    id_match = re.search(id_pattern, parsed_data[\"\
          json_str\"])\n                    if id_match:\n                       \
          \ return {'result': id_match.group(1)}\n            else:\n            \
          \    data = parsed_data\n        except:\n            # å¦‚æœç›´æ¥è§£æå¤±è´¥ï¼Œå°è¯•ç”¨æ­£åˆ™è¡¨è¾¾å¼\n\
          \            id_pattern = r'\"id\"?\\s*:\\s*(\\d+)'\n            id_match\
          \ = re.search(id_pattern, json_str)\n            if id_match:\n        \
          \        return {'result': id_match.group(1)}\n        \n        # å¦‚æœæˆåŠŸè§£æä¸ºJSONå¯¹è±¡ï¼Œå°è¯•ä»ä¸­æå–ID\n\
          \        if data and \"data\" in data and isinstance(data[\"data\"], list)\
          \ and len(data[\"data\"]) > 0:\n            if \"id\" in data[\"data\"][0]:\n\
          \                return {'result': str(data[\"data\"][0][\"id\"])}\n   \
          \     \n        # å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½å¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n        return {'result': \"æ— æ³•æå–IDï¼Œè¯·æ£€æŸ¥è¾“å…¥æ ¼å¼\"\
          }\n    except Exception as e:\n        return {'result': f\"é”™è¯¯: {str(e)}\"\
          }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æå–ç”¨æˆ·ID
        type: code
        variables:
        - value_selector:
          - '1746546036659'
          - body
          variable: json_str
        - value_selector:
          - sys
          - user_id
          variable: uuid
      height: 54
      id: '1746546784219'
      position:
        x: 942
        y: 311
      positionAbsolute:
        x: 942
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: fe65bef8-2344-47c7-bf22-c6676eadfe1d
            sub_variable_condition:
              case_id: 0d958dff-85cb-49df-89c6-618581c95233
              conditions:
              - comparison_operator: in
                id: bb60ac5e-932b-4286-8258-1296a2fc5b7c
                key: type
                value:
                - image
                varType: string
              logical_operator: and
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: 'true'
          logical_operator: and
        - case_id: 517b6a6e-43d0-4d29-8cd3-d039841265d3
          conditions:
          - comparison_operator: contains
            id: e2ec3eae-1896-4032-8f67-e1744d9bb314
            sub_variable_condition:
              case_id: 9ca6e04b-bb8f-4588-8c8d-b0bf40cee2bf
              conditions:
              - comparison_operator: in
                id: 36c2aafd-4b78-4122-a6fe-0128c2b38f6a
                key: type
                value:
                - document
                varType: string
              logical_operator: and
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: 517b6a6e-43d0-4d29-8cd3-d039841265d3
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯
        type: if-else
      height: 222
      id: '1746547918808'
      position:
        x: 1246
        y: 311
      positionAbsolute:
        x: 1246
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - type: text
            value: ''
          type: none
        desc: ''
        headers: 'Accept:application/json

          Authorization:Bearer {{#env.Nocobase_API#}}

          X-Locale:zh-CN

          X-Role:root'
        method: get
        params: 'pageSize:50

          page:1

          filter:{}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–æ‰€æœ‰åˆ†ç±»
        type: http-request
        url: '{{#env.Nocobase_URL#}}/api/t_FenLei:list'
        variables: []
      height: 142
      id: '1746548329821'
      position:
        x: 2462
        y: 311
      positionAbsolute:
        x: 2462
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport re\n\ndef main(data: str) -> dict:\n    try:\n\
          \        # å°è¯•ç›´æ¥è§£æJSONå­—ç¬¦ä¸²\n        try:\n            json_data = json.loads(data)\n\
          \        except json.JSONDecodeError:\n            # å¦‚æœç›´æ¥è§£æå¤±è´¥ï¼Œå°è¯•æ¸…ç†å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰å­—ç¬¦\n\
          \            # ç§»é™¤å¤šä½™çš„åæ–œæ \n            cleaned_data = re.sub(r'\\\\+([\"\\\
          \\\\'])', r'\\1', data)\n            # å°è¯•å†æ¬¡è§£æ\n            json_data = json.loads(cleaned_data)\n\
          \        \n        lines = []\n        # éå†æ•°æ®é¡¹å¹¶æå–æ–¹å‘å’Œåç§°\n        for item\
          \ in json_data.get('data', []):\n            direction = item.get('f_FenLei_FangXiang',\
          \ '')\n            name = item.get('f_FenLei_Name', '')\n            if\
          \ direction and name:\n                lines.append(f\"{direction}ï¼Œ{name}\"\
          )\n        \n        # å°†æ•°ç»„åˆå¹¶ä¸ºå•ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯è¡Œä¸€ä¸ªé¡¹ç›®\n        result_str = \"\\n\"\
          .join(lines)\n        \n        # è¿”å›å•ä¸ªå­—ç¬¦ä¸²ç»“æœ\n        return {\"result\"\
          : result_str}\n    except Exception as e:\n        # å¦‚æœæ‰€æœ‰å°è¯•éƒ½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥ä»å­—ç¬¦ä¸²ä¸­æå–æ‰€éœ€ä¿¡æ¯\n\
          \        try:\n            # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ–¹å‘å’Œåç§°\n            pattern = r'f_FenLei_FangXiang\\\
          \\+\":\\s*\\\\+\"([^\\\\]+)\\\\+\".+?f_FenLei_Name\\\\+\":\\s*\\\\+\"([^\\\
          \\]+)\\\\+\"'\n            matches = re.findall(pattern, data)\n       \
          \     \n            if matches:\n                lines = [f\"{direction}ï¼Œ{name}\"\
          \ for direction, name in matches]\n                result_str = \"\\n\"\
          .join(lines)\n                return {\"result\": result_str}\n        \
          \    else:\n                return {\"result\": \"æ— æ³•æå–æ•°æ®: æœªæ‰¾åˆ°åŒ¹é…é¡¹\"}\n  \
          \      except Exception as e2:\n            return {\"result\": f\"é”™è¯¯: {str(e)},\
          \ äºŒæ¬¡å¤„ç†é”™è¯¯: {str(e2)}\"}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æ•´ç†åˆ†ç±»ä¿¡æ¯
        type: code
        variables:
        - value_selector:
          - '1746548329821'
          - body
          variable: data
      height: 54
      id: '1746548495304'
      position:
        x: 2766
        y: 311
      positionAbsolute:
        x: 2766
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: '%Y-%m-%d %H:%M:%S'
          form: form
          human_description:
            en_US: Time format in strftime standard.
            ja_JP: Time format in strftime standard.
            pt_BR: Time format in strftime standard.
            zh_Hans: strftime æ ‡å‡†çš„æ—¶é—´æ ¼å¼ã€‚
          label:
            en_US: Format
            ja_JP: Format
            pt_BR: Format
            zh_Hans: æ ¼å¼
          llm_description: null
          max: null
          min: null
          name: format
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: UTC
          form: form
          human_description:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: æ—¶åŒº
          label:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: æ—¶åŒº
          llm_description: null
          max: null
          min: null
          name: timezone
          options:
          - label:
              en_US: UTC
              ja_JP: UTC
              pt_BR: UTC
              zh_Hans: UTC
            value: UTC
          - label:
              en_US: America/New_York
              ja_JP: America/New_York
              pt_BR: America/New_York
              zh_Hans: ç¾æ´²/çº½çº¦
            value: America/New_York
          - label:
              en_US: America/Los_Angeles
              ja_JP: America/Los_Angeles
              pt_BR: America/Los_Angeles
              zh_Hans: ç¾æ´²/æ´›æ‰çŸ¶
            value: America/Los_Angeles
          - label:
              en_US: America/Chicago
              ja_JP: America/Chicago
              pt_BR: America/Chicago
              zh_Hans: ç¾æ´²/èŠåŠ å“¥
            value: America/Chicago
          - label:
              en_US: America/Sao_Paulo
              ja_JP: America/Sao_Paulo
              pt_BR: AmÃ©rica/SÃ£o Paulo
              zh_Hans: ç¾æ´²/åœ£ä¿ç½—
            value: America/Sao_Paulo
          - label:
              en_US: Asia/Shanghai
              ja_JP: Asia/Shanghai
              pt_BR: Asia/Shanghai
              zh_Hans: äºšæ´²/ä¸Šæµ·
            value: Asia/Shanghai
          - label:
              en_US: Asia/Ho_Chi_Minh
              ja_JP: Asia/Ho_Chi_Minh
              pt_BR: Ãsia/Ho Chi Minh
              zh_Hans: äºšæ´²/èƒ¡å¿—æ˜å¸‚
            value: Asia/Ho_Chi_Minh
          - label:
              en_US: Asia/Tokyo
              ja_JP: Asia/Tokyo
              pt_BR: Asia/Tokyo
              zh_Hans: äºšæ´²/ä¸œäº¬
            value: Asia/Tokyo
          - label:
              en_US: Asia/Dubai
              ja_JP: Asia/Dubai
              pt_BR: Asia/Dubai
              zh_Hans: äºšæ´²/è¿ªæ‹œ
            value: Asia/Dubai
          - label:
              en_US: Asia/Kolkata
              ja_JP: Asia/Kolkata
              pt_BR: Asia/Kolkata
              zh_Hans: äºšæ´²/åŠ å°”å„ç­”
            value: Asia/Kolkata
          - label:
              en_US: Asia/Seoul
              ja_JP: Asia/Seoul
              pt_BR: Asia/Seoul
              zh_Hans: äºšæ´²/é¦–å°”
            value: Asia/Seoul
          - label:
              en_US: Asia/Singapore
              ja_JP: Asia/Singapore
              pt_BR: Asia/Singapore
              zh_Hans: äºšæ´²/æ–°åŠ å¡
            value: Asia/Singapore
          - label:
              en_US: Europe/London
              ja_JP: Europe/London
              pt_BR: Europe/London
              zh_Hans: æ¬§æ´²/ä¼¦æ•¦
            value: Europe/London
          - label:
              en_US: Europe/Berlin
              ja_JP: Europe/Berlin
              pt_BR: Europe/Berlin
              zh_Hans: æ¬§æ´²/æŸæ—
            value: Europe/Berlin
          - label:
              en_US: Europe/Moscow
              ja_JP: Europe/Moscow
              pt_BR: Europe/Moscow
              zh_Hans: æ¬§æ´²/è«æ–¯ç§‘
            value: Europe/Moscow
          - label:
              en_US: Australia/Sydney
              ja_JP: Australia/Sydney
              pt_BR: Australia/Sydney
              zh_Hans: æ¾³å¤§åˆ©äºš/æ‚‰å°¼
            value: Australia/Sydney
          - label:
              en_US: Pacific/Auckland
              ja_JP: Pacific/Auckland
              pt_BR: Pacific/Auckland
              zh_Hans: å¤ªå¹³æ´‹/å¥¥å…‹å…°
            value: Pacific/Auckland
          - label:
              en_US: Africa/Cairo
              ja_JP: Africa/Cairo
              pt_BR: Africa/Cairo
              zh_Hans: éæ´²/å¼€ç½—
            value: Africa/Cairo
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        params:
          format: ''
          timezone: ''
        provider_id: time
        provider_name: time
        provider_type: builtin
        selected: false
        title: è·å–å½“å‰å¹´ä»½
        tool_configurations:
          format: '%Y'
          timezone: Asia/Shanghai
        tool_description: ä¸€ä¸ªç”¨äºè·å–å½“å‰æ—¶é—´çš„å·¥å…·ã€‚
        tool_label: è·å–å½“å‰æ—¶é—´
        tool_name: current_time
        tool_parameters: {}
        type: tool
      height: 116
      id: '1746549486512'
      position:
        x: 3374
        y: 493
      positionAbsolute:
        x: 3374
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: '%Y-%m-%d %H:%M:%S'
          form: form
          human_description:
            en_US: Time format in strftime standard.
            ja_JP: Time format in strftime standard.
            pt_BR: Time format in strftime standard.
            zh_Hans: strftime æ ‡å‡†çš„æ—¶é—´æ ¼å¼ã€‚
          label:
            en_US: Format
            ja_JP: Format
            pt_BR: Format
            zh_Hans: æ ¼å¼
          llm_description: null
          max: null
          min: null
          name: format
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: UTC
          form: form
          human_description:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: æ—¶åŒº
          label:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: æ—¶åŒº
          llm_description: null
          max: null
          min: null
          name: timezone
          options:
          - label:
              en_US: UTC
              ja_JP: UTC
              pt_BR: UTC
              zh_Hans: UTC
            value: UTC
          - label:
              en_US: America/New_York
              ja_JP: America/New_York
              pt_BR: America/New_York
              zh_Hans: ç¾æ´²/çº½çº¦
            value: America/New_York
          - label:
              en_US: America/Los_Angeles
              ja_JP: America/Los_Angeles
              pt_BR: America/Los_Angeles
              zh_Hans: ç¾æ´²/æ´›æ‰çŸ¶
            value: America/Los_Angeles
          - label:
              en_US: America/Chicago
              ja_JP: America/Chicago
              pt_BR: America/Chicago
              zh_Hans: ç¾æ´²/èŠåŠ å“¥
            value: America/Chicago
          - label:
              en_US: America/Sao_Paulo
              ja_JP: America/Sao_Paulo
              pt_BR: AmÃ©rica/SÃ£o Paulo
              zh_Hans: ç¾æ´²/åœ£ä¿ç½—
            value: America/Sao_Paulo
          - label:
              en_US: Asia/Shanghai
              ja_JP: Asia/Shanghai
              pt_BR: Asia/Shanghai
              zh_Hans: äºšæ´²/ä¸Šæµ·
            value: Asia/Shanghai
          - label:
              en_US: Asia/Ho_Chi_Minh
              ja_JP: Asia/Ho_Chi_Minh
              pt_BR: Ãsia/Ho Chi Minh
              zh_Hans: äºšæ´²/èƒ¡å¿—æ˜å¸‚
            value: Asia/Ho_Chi_Minh
          - label:
              en_US: Asia/Tokyo
              ja_JP: Asia/Tokyo
              pt_BR: Asia/Tokyo
              zh_Hans: äºšæ´²/ä¸œäº¬
            value: Asia/Tokyo
          - label:
              en_US: Asia/Dubai
              ja_JP: Asia/Dubai
              pt_BR: Asia/Dubai
              zh_Hans: äºšæ´²/è¿ªæ‹œ
            value: Asia/Dubai
          - label:
              en_US: Asia/Kolkata
              ja_JP: Asia/Kolkata
              pt_BR: Asia/Kolkata
              zh_Hans: äºšæ´²/åŠ å°”å„ç­”
            value: Asia/Kolkata
          - label:
              en_US: Asia/Seoul
              ja_JP: Asia/Seoul
              pt_BR: Asia/Seoul
              zh_Hans: äºšæ´²/é¦–å°”
            value: Asia/Seoul
          - label:
              en_US: Asia/Singapore
              ja_JP: Asia/Singapore
              pt_BR: Asia/Singapore
              zh_Hans: äºšæ´²/æ–°åŠ å¡
            value: Asia/Singapore
          - label:
              en_US: Europe/London
              ja_JP: Europe/London
              pt_BR: Europe/London
              zh_Hans: æ¬§æ´²/ä¼¦æ•¦
            value: Europe/London
          - label:
              en_US: Europe/Berlin
              ja_JP: Europe/Berlin
              pt_BR: Europe/Berlin
              zh_Hans: æ¬§æ´²/æŸæ—
            value: Europe/Berlin
          - label:
              en_US: Europe/Moscow
              ja_JP: Europe/Moscow
              pt_BR: Europe/Moscow
              zh_Hans: æ¬§æ´²/è«æ–¯ç§‘
            value: Europe/Moscow
          - label:
              en_US: Australia/Sydney
              ja_JP: Australia/Sydney
              pt_BR: Australia/Sydney
              zh_Hans: æ¾³å¤§åˆ©äºš/æ‚‰å°¼
            value: Australia/Sydney
          - label:
              en_US: Pacific/Auckland
              ja_JP: Pacific/Auckland
              pt_BR: Pacific/Auckland
              zh_Hans: å¤ªå¹³æ´‹/å¥¥å…‹å…°
            value: Pacific/Auckland
          - label:
              en_US: Africa/Cairo
              ja_JP: Africa/Cairo
              pt_BR: Africa/Cairo
              zh_Hans: éæ´²/å¼€ç½—
            value: Africa/Cairo
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        params:
          format: ''
          timezone: ''
        provider_id: time
        provider_name: time
        provider_type: builtin
        selected: false
        title: è·å–å½“å‰æœˆä»½
        tool_configurations:
          format: '%m'
          timezone: Asia/Shanghai
        tool_description: ä¸€ä¸ªç”¨äºè·å–å½“å‰æ—¶é—´çš„å·¥å…·ã€‚
        tool_label: è·å–å½“å‰æ—¶é—´
        tool_name: current_time
        tool_parameters: {}
        type: tool
      height: 116
      id: '1746549541358'
      position:
        x: 3678
        y: 493
      positionAbsolute:
        x: 3678
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(name: str, year: int, month: str = None) -> dict:\n    # å¦‚æœnameåŒ…å«\"\
          å®¶åº­\"ï¼Œç»Ÿä¸€è®¾ç½®ä¸º\"å®¶åº­å¼€é”€\"\n    if name and \"å®¶åº­\" in name:\n        name = \"å®¶åº­å¼€é”€\"\
          \n    \n    # å¤„ç†monthä¸ºNoneçš„æƒ…å†µ\n    if month is None:\n        processed_month\
          \ = \"\"\n    else:\n        processed_month = month.lstrip('0') if month.startswith('0')\
          \ and len(month) > 1 else month\n    \n    # å¦‚æœnameæ˜¯\"å®¶åº­å¼€é”€\"ï¼Œåˆ™åªç»„åˆnameå’Œyear\n\
          \    if name == \"å®¶åº­å¼€é”€\":\n        result = f\"{name}-{year}\"\n    else:\n\
          \        # åªæœ‰å½“monthæœ‰å€¼æ—¶æ‰æ·»åŠ åˆ°ç»“æœä¸­\n        if processed_month:\n           \
          \ result = f\"{name}-{year}-{processed_month}\"\n        else:\n       \
          \     result = f\"{name}-{year}\"\n    \n    return {\n        'result':\
          \ result,\n        'month': processed_month\n    }"
        code_language: python3
        desc: ''
        outputs:
          month:
            children: null
            type: string
          result:
            children: null
            type: string
        selected: false
        title: ç”Ÿæˆé¢„ç®—åç§°
        type: code
        variables:
        - value_selector:
          - '1746550318698'
          - YuSuan
          variable: name
        - value_selector:
          - '1746549486512'
          - text
          variable: year
        - value_selector:
          - '1746549541358'
          - text
          variable: month
      height: 54
      id: '17465495921760'
      position:
        x: 3982
        y: 493
      positionAbsolute:
        x: 3982
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: '%Y-%m-%d %H:%M:%S'
          form: form
          human_description:
            en_US: Time format in strftime standard.
            ja_JP: Time format in strftime standard.
            pt_BR: Time format in strftime standard.
            zh_Hans: strftime æ ‡å‡†çš„æ—¶é—´æ ¼å¼ã€‚
          label:
            en_US: Format
            ja_JP: Format
            pt_BR: Format
            zh_Hans: æ ¼å¼
          llm_description: null
          max: null
          min: null
          name: format
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: UTC
          form: form
          human_description:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: æ—¶åŒº
          label:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: æ—¶åŒº
          llm_description: null
          max: null
          min: null
          name: timezone
          options:
          - label:
              en_US: UTC
              ja_JP: UTC
              pt_BR: UTC
              zh_Hans: UTC
            value: UTC
          - label:
              en_US: America/New_York
              ja_JP: America/New_York
              pt_BR: America/New_York
              zh_Hans: ç¾æ´²/çº½çº¦
            value: America/New_York
          - label:
              en_US: America/Los_Angeles
              ja_JP: America/Los_Angeles
              pt_BR: America/Los_Angeles
              zh_Hans: ç¾æ´²/æ´›æ‰çŸ¶
            value: America/Los_Angeles
          - label:
              en_US: America/Chicago
              ja_JP: America/Chicago
              pt_BR: America/Chicago
              zh_Hans: ç¾æ´²/èŠåŠ å“¥
            value: America/Chicago
          - label:
              en_US: America/Sao_Paulo
              ja_JP: America/Sao_Paulo
              pt_BR: AmÃ©rica/SÃ£o Paulo
              zh_Hans: ç¾æ´²/åœ£ä¿ç½—
            value: America/Sao_Paulo
          - label:
              en_US: Asia/Shanghai
              ja_JP: Asia/Shanghai
              pt_BR: Asia/Shanghai
              zh_Hans: äºšæ´²/ä¸Šæµ·
            value: Asia/Shanghai
          - label:
              en_US: Asia/Ho_Chi_Minh
              ja_JP: Asia/Ho_Chi_Minh
              pt_BR: Ãsia/Ho Chi Minh
              zh_Hans: äºšæ´²/èƒ¡å¿—æ˜å¸‚
            value: Asia/Ho_Chi_Minh
          - label:
              en_US: Asia/Tokyo
              ja_JP: Asia/Tokyo
              pt_BR: Asia/Tokyo
              zh_Hans: äºšæ´²/ä¸œäº¬
            value: Asia/Tokyo
          - label:
              en_US: Asia/Dubai
              ja_JP: Asia/Dubai
              pt_BR: Asia/Dubai
              zh_Hans: äºšæ´²/è¿ªæ‹œ
            value: Asia/Dubai
          - label:
              en_US: Asia/Kolkata
              ja_JP: Asia/Kolkata
              pt_BR: Asia/Kolkata
              zh_Hans: äºšæ´²/åŠ å°”å„ç­”
            value: Asia/Kolkata
          - label:
              en_US: Asia/Seoul
              ja_JP: Asia/Seoul
              pt_BR: Asia/Seoul
              zh_Hans: äºšæ´²/é¦–å°”
            value: Asia/Seoul
          - label:
              en_US: Asia/Singapore
              ja_JP: Asia/Singapore
              pt_BR: Asia/Singapore
              zh_Hans: äºšæ´²/æ–°åŠ å¡
            value: Asia/Singapore
          - label:
              en_US: Europe/London
              ja_JP: Europe/London
              pt_BR: Europe/London
              zh_Hans: æ¬§æ´²/ä¼¦æ•¦
            value: Europe/London
          - label:
              en_US: Europe/Berlin
              ja_JP: Europe/Berlin
              pt_BR: Europe/Berlin
              zh_Hans: æ¬§æ´²/æŸæ—
            value: Europe/Berlin
          - label:
              en_US: Europe/Moscow
              ja_JP: Europe/Moscow
              pt_BR: Europe/Moscow
              zh_Hans: æ¬§æ´²/è«æ–¯ç§‘
            value: Europe/Moscow
          - label:
              en_US: Australia/Sydney
              ja_JP: Australia/Sydney
              pt_BR: Australia/Sydney
              zh_Hans: æ¾³å¤§åˆ©äºš/æ‚‰å°¼
            value: Australia/Sydney
          - label:
              en_US: Pacific/Auckland
              ja_JP: Pacific/Auckland
              pt_BR: Pacific/Auckland
              zh_Hans: å¤ªå¹³æ´‹/å¥¥å…‹å…°
            value: Pacific/Auckland
          - label:
              en_US: Africa/Cairo
              ja_JP: Africa/Cairo
              pt_BR: Africa/Cairo
              zh_Hans: éæ´²/å¼€ç½—
            value: Africa/Cairo
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        params:
          format: ''
          timezone: ''
        provider_id: time
        provider_name: time
        provider_type: builtin
        selected: false
        title: è·å–å½“å‰æ—¥æœŸ
        tool_configurations:
          format: '%Y-%m-%d'
          timezone: Asia/Shanghai
        tool_description: ä¸€ä¸ªç”¨äºè·å–å½“å‰æ—¶é—´çš„å·¥å…·ã€‚
        tool_label: è·å–å½“å‰æ—¶é—´
        tool_name: current_time
        tool_parameters: {}
        type: tool
      height: 116
      id: '1746549859456'
      position:
        x: 4286
        y: 103.57142857142853
      positionAbsolute:
        x: 4286
        y: 103.57142857142853
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        instruction: 'æ ¹æ®ä»Šå¤©çš„æ—¥æœŸï¼š{{#1746549859456.text#}}

          ä»¥åŠä»¥ä¸‹è¯­å¥çš„è¯­å¢ƒï¼š{{#sys.query#}}

          åˆ¤æ–­æµæ°´å‘ç”Ÿçš„æ—¥æœŸï¼›

          å¦‚æœè¯­å¥æœªæ˜ç¡®æåˆ°æ—¶é—´ï¼Œåˆ™é»˜è®¤è¾“å…¥ä»Šå¤©çš„æ—¥æœŸã€‚'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: Qwen/Qwen2.5-32B-Instruct
          provider: langgenius/siliconflow/siliconflow
        parameters:
        - description: æµæ°´æ—¥æœŸ
          name: LiuShui_Date
          required: false
          type: string
        query:
        - '1746549859456'
        - text
        reasoning_mode: prompt
        selected: false
        title: ç¡®å®šæµæ°´å‘ç”Ÿæ—¥æœŸ
        type: parameter-extractor
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1746549934072'
      position:
        x: 4590
        y: 103.57142857142853
      positionAbsolute:
        x: 4590
        y: 103.57142857142853
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        instruction: 'æ ¹æ®è¾“å…¥çš„æµæ°´æ˜ç»†ï¼š{{#1746550371697.output#}}

          æå–æ˜ç»†çš„åç§°ï¼Œèµ‹å€¼ç»™Name

          æµæ°´çš„ç±»å‹ï¼Œä¸ºæ”¯å‡ºè¿˜æ˜¯æ”¶å…¥ï¼Œèµ‹å€¼ç»™Type

          åˆ†ç±»ï¼šä¸¥æ ¼ä»{{#1746548495304.result#}}ä¸­é€‰æ‹©ç¬¦åˆæµæ°´çš„åˆ†ç±»ï¼Œæ ¹æ®æ”¯å‡ºæˆ–æ”¶å…¥ï¼Œé€‰æ‹©åˆé€‚çš„åˆ†ç±»ï¼›åˆ†ç±»ä¸è¦åŒ…å«æ”¯å‡ºæˆ–è¾“å…¥å­—æ ·ï¼Œä»…åŒ…å«æœ€ç»ˆçš„åˆ†ç±»ä¿¡æ¯ã€‚ï¼ˆç‰¹æ®Šè§„åˆ™ï¼šå¼€é€šä¼šå‘˜è´¦å·æˆ–è€…è®¢é˜…ï¼Œå±äºæ•°ç åˆ†ç±»ï¼‰

          é¢„ç®—ä¿¡æ¯ï¼šå¦‚æœæåˆ°é¢„ç®—ä¿¡æ¯ï¼Œåˆ™è¾“å‡ºå¯¹åº”çš„é¢„ç®—åç§°ï¼›å¦‚æœæ²¡æœ‰æåŠï¼Œé¢„ç®—åç§°åˆ™ä¸º{{#1746594655609.result#}}

          é‡‘é¢ï¼šæåˆ°çš„é‡‘é¢ä¿¡æ¯ï¼Œä»…ä¿å­˜æ•°å­—ï¼Œä¸è¦åŠ ä»»ä½•æ–‡å­—'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: Qwen/Qwen2.5-32B-Instruct
          provider: langgenius/siliconflow/siliconflow
        parameters:
        - description: æ˜ç»†åç§°
          name: Name
          required: false
          type: string
        - description: æ”¯å‡ºæˆ–æ”¶å…¥
          name: Type
          required: false
          type: string
        - description: åˆ†ç±»
          name: class
          required: false
          type: string
        - description: é¢„ç®—ä¿¡æ¯
          name: YuSuan
          required: false
          type: string
        - description: é‡‘é¢
          name: JinE
          required: false
          type: number
        query:
        - sys
        - query
        reasoning_mode: prompt
        selected: false
        title: æå–æ˜ç»†ä»¥åŠåˆ†ç±»ä¿¡æ¯
        type: parameter-extractor
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1746550318698'
      position:
        x: 3070
        y: 311
      positionAbsolute:
        x: 3070
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: èšåˆæµæ°´æ˜ç»†
        type: variable-aggregator
        variables:
        - - '1746550450564'
          - output
        - - '1746595346612'
          - text
      height: 131
      id: '1746550371697'
      position:
        x: 1854
        y: 311
      positionAbsolute:
        x: 1854
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: '{{ arg1 }}'
        title: æå–æ–‡å­—è¾“å…¥
        type: template-transform
        variables:
        - value_selector:
          - sys
          - query
          variable: arg1
      height: 54
      id: '1746550450564'
      position:
        x: 1550
        y: 311
      positionAbsolute:
        x: 1550
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: ''
          type: none
        desc: ''
        headers: 'Accept:application/json

          Authorization:Bearer {{#env.Nocobase_API#}}

          X-Locale:zh-CN

          X-Role:root'
        method: get
        params: 'pageSize:20

          page:1

          filter:{"$and":[{"f_FenLei_Name":{"$includes":"{{#1746550318698.class#}}"}}]}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–åˆ†ç±»ID
        type: http-request
        url: '{{#env.Nocobase_URL#}}/api/t_FenLei:list'
        variables: []
      height: 142
      id: '1746551904312'
      position:
        x: 4286
        y: 311
      positionAbsolute:
        x: 4286
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - type: text
            value: ''
          type: none
        desc: ''
        headers: 'Accept:application/json

          Authorization:Bearer {{#env.Nocobase_API#}}

          X-Locale:zh-CN

          X-Role:root'
        method: get
        params: 'pageSize:20

          sort[]:-f_YuSuan_ShengXiaoRiQi

          appends[]:f_YuSuan_YongHu

          page:1

          filter:{"$and":[{"$and":[{"f_YuSuan_Name":{"$eq":"{{#17465495921760.result#}}"}}]}]}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–é¢„ç®—ID
        type: http-request
        url: '{{#env.Nocobase_URL#}}/api/t_YuSuan:list'
        variables: []
      height: 142
      id: '1746552052543'
      position:
        x: 4286
        y: 493
      positionAbsolute:
        x: 4286
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport re\n\ndef main(data: str) -> dict:\n    try:\n\
          \        # å¤„ç†è¾“å…¥ä¸ºnullçš„æƒ…å†µ\n        if data is None or data.strip().lower()\
          \ == \"null\":\n            return {\"result\": \"\"}\n            \n  \
          \      # é¦–å…ˆå°è¯•ç›´æ¥è§£æ\n        try:\n            json_data = json.loads(data)\n\
          \        except json.JSONDecodeError:\n            # å¦‚æœè§£æå¤±è´¥ï¼Œå°è¯•æ¸…ç†å­—ç¬¦ä¸²\n  \
          \          # æ£€æŸ¥æ˜¯å¦æ˜¯åµŒå¥—çš„JSONå­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²ä¸­çš„JSONï¼‰\n            if data.startswith('{')\
          \ and '\"data\":' in data:\n                # å°è¯•æå–å¹¶æ¸…ç†å†…éƒ¨JSON\n          \
          \      match = re.search(r'\"data\":\\s*\"(.*?)\"(?:,|$)', data)\n     \
          \           if match:\n                    inner_json = match.group(1)\n\
          \                    # æ›¿æ¢è½¬ä¹‰å­—ç¬¦\n                    inner_json = inner_json.replace('\\\
          \\\\\\', '\\\\').replace('\\\\\"', '\"')\n                    # å°è¯•è§£ææ¸…ç†åçš„JSON\n\
          \                    json_data = json.loads(inner_json)\n              \
          \  else:\n                    # å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°å†…éƒ¨JSONï¼Œå°è¯•æ¸…ç†æ•´ä¸ªå­—ç¬¦ä¸²\n              \
          \      cleaned_data = re.sub(r'\\\\+([\"\\\\\\'])', r'\\1', data)\n    \
          \                json_data = json.loads(cleaned_data)\n            else:\n\
          \                # å¦‚æœä¸æ˜¯åµŒå¥—çš„JSONï¼Œç›´æ¥æ¸…ç†æ•´ä¸ªå­—ç¬¦ä¸²\n                cleaned_data =\
          \ re.sub(r'\\\\+([\"\\\\\\'])', r'\\1', data)\n                json_data\
          \ = json.loads(cleaned_data)\n        \n        # æ£€æŸ¥dataæ•°ç»„æ˜¯å¦å­˜åœ¨ä¸”ä¸ä¸ºç©º\n   \
          \     if not json_data.get('data') or len(json_data['data']) == 0:\n   \
          \         return {\"result\": \"\"}\n        \n        # æå–ç¬¬ä¸€ä¸ªå¯¹è±¡çš„idå€¼å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n\
          \        id_value = json_data['data'][0].get('id')\n        if id_value\
          \ is not None:\n            return {\"result\": str(id_value)}\n       \
          \ else:\n            return {\"result\": \"\"}\n    except Exception as\
          \ e:\n        # å¦‚æœæ‰€æœ‰å°è¯•éƒ½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥ä»å­—ç¬¦ä¸²ä¸­æå–ID\n        try:\n         \
          \   # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ID\n            id_match = re.search(r'\\\\+\"id\\\\+\":\\\
          s*(\\d+)', data)\n            if id_match:\n                id_value = id_match.group(1)\
          \  # å·²ç»æ˜¯å­—ç¬¦ä¸²\n                return {\"result\": id_value}\n           \
          \ else:\n                return {\"result\": \"\"}\n        except Exception\
          \ as e2:\n            return {\"result\": \"\"}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: è·å–é¢„ç®—ID
        type: code
        variables:
        - value_selector:
          - '1746552052543'
          - body
          variable: data
      height: 54
      id: '1746552392497'
      position:
        x: 4590
        y: 493
      positionAbsolute:
        x: 4590
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport re\n\ndef main(data: str) -> dict:\n    try:\n\
          \        # å¤„ç†è¾“å…¥ä¸ºnullçš„æƒ…å†µ\n        if data is None or data.strip().lower()\
          \ == \"null\":\n            return {\"result\": \"\"}\n            \n  \
          \      # é¦–å…ˆå°è¯•ç›´æ¥è§£æ\n        try:\n            json_data = json.loads(data)\n\
          \        except json.JSONDecodeError:\n            # å¦‚æœè§£æå¤±è´¥ï¼Œå°è¯•æ¸…ç†å­—ç¬¦ä¸²\n  \
          \          # æ£€æŸ¥æ˜¯å¦æ˜¯åµŒå¥—çš„JSONå­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²ä¸­çš„JSONï¼‰\n            if data.startswith('{')\
          \ and '\"data\":' in data:\n                # å°è¯•æå–å¹¶æ¸…ç†å†…éƒ¨JSON\n          \
          \      match = re.search(r'\"data\":\\s*\"(.*?)\"(?:,|$)', data)\n     \
          \           if match:\n                    inner_json = match.group(1)\n\
          \                    # æ›¿æ¢è½¬ä¹‰å­—ç¬¦\n                    inner_json = inner_json.replace('\\\
          \\\\\\', '\\\\').replace('\\\\\"', '\"')\n                    # å°è¯•è§£ææ¸…ç†åçš„JSON\n\
          \                    json_data = json.loads(inner_json)\n              \
          \  else:\n                    # å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°å†…éƒ¨JSONï¼Œå°è¯•æ¸…ç†æ•´ä¸ªå­—ç¬¦ä¸²\n              \
          \      cleaned_data = re.sub(r'\\\\+([\"\\\\\\'])', r'\\1', data)\n    \
          \                json_data = json.loads(cleaned_data)\n            else:\n\
          \                # å¦‚æœä¸æ˜¯åµŒå¥—çš„JSONï¼Œç›´æ¥æ¸…ç†æ•´ä¸ªå­—ç¬¦ä¸²\n                cleaned_data =\
          \ re.sub(r'\\\\+([\"\\\\\\'])', r'\\1', data)\n                json_data\
          \ = json.loads(cleaned_data)\n        \n        # æ£€æŸ¥dataæ•°ç»„æ˜¯å¦å­˜åœ¨ä¸”ä¸ä¸ºç©º\n   \
          \     if not json_data.get('data') or len(json_data['data']) == 0:\n   \
          \         return {\"result\": \"\"}\n        \n        # æå–ç¬¬ä¸€ä¸ªå¯¹è±¡çš„idå€¼å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n\
          \        id_value = json_data['data'][0].get('id')\n        if id_value\
          \ is not None:\n            return {\"result\": str(id_value)}\n       \
          \ else:\n            return {\"result\": \"\"}\n    except Exception as\
          \ e:\n        # å¦‚æœæ‰€æœ‰å°è¯•éƒ½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥ä»å­—ç¬¦ä¸²ä¸­æå–ID\n        try:\n         \
          \   # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ID\n            id_match = re.search(r'\\\\+\"id\\\\+\":\\\
          s*(\\d+)', data)\n            if id_match:\n                id_value = id_match.group(1)\
          \  # å·²ç»æ˜¯å­—ç¬¦ä¸²\n                return {\"result\": id_value}\n           \
          \ else:\n                return {\"result\": \"\"}\n        except Exception\
          \ as e2:\n            return {\"result\": \"\"}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æå–åˆ†ç±»ID
        type: code
        variables:
        - value_selector:
          - '1746551904312'
          - body
          variable: data
      height: 54
      id: '1746552876412'
      position:
        x: 4590
        y: 311
      positionAbsolute:
        x: 4590
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - type: text
            value: "{\n    \"f_LiuShui_FangXiang\": \"{{#1746550318698.Type#}}\",\n\
              \    \"f_LiuShui_FenLei\": {\n        \"id\": {{#1746552876412.result#}}\n\
              \    },\n    \"f_LiuShui_RiQi\": \"{{#1746549934072.LiuShui_Date#}}\"\
              ,\n    \"f_LiuShui_User\": {\n        \"id\": {{#1746546784219.result#}}\n\
              \    },\n    \"f_LiuShui_Year\": {{#1746549486512.text#}},\n    \"f_LiuShui_Month\"\
              : {{#17465495921760.month#}},\n    \"f_LiuShui_Name\": \"{{#1746550318698.Name#}}\"\
              ,\n    \"f_LiuShui_JinE\": {{#1746550318698.JinE#}},\n    \"f_LiuShui_YuSuan\"\
              : {\n        \"id\": {{#1746552392497.result#}}\n    }\n}"
          type: raw-text
        desc: ''
        headers: 'Accept:application/json

          Authorization:Bearer {{#env.Nocobase_API#}}

          Content-Type:application/json

          X-Locale:zh-CN

          X-Role:root'
        method: post
        params: triggerWorkflows:g1kn1g4e814
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: åˆ›å»ºæµæ°´
        type: http-request
        url: '{{#env.Nocobase_URL#}}/api/t_LiuShui:create'
        variables: []
      height: 142
      id: '1746552975531'
      position:
        x: 4894
        y: 493
      positionAbsolute:
        x: 4894
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(status_code: int) -> dict:\n    if status_code == 200:\n \
          \       return {'result': 'åˆ›å»ºæˆåŠŸï¼ˆ200ï¼‰'}\n    else:\n        return {'result':\
          \ f'åˆ›å»ºå¤±è´¥ï¼ˆ{status_code}ï¼‰'}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: åˆ¤å®šæ˜¯å¦åˆ›å»ºæˆåŠŸ
        type: code
        variables:
        - value_selector:
          - '1746552975531'
          - status_code
          variable: status_code
      height: 54
      id: '1746581525468'
      position:
        x: 5198
        y: 493
      positionAbsolute:
        x: 5198
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(text: str) -> dict:\n    name = text.split('==')[-1]\n   \
          \ return {'result': name}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æå–ç”¨æˆ·å
        type: code
        variables:
        - value_selector:
          - sys
          - user_id
          variable: text
      height: 54
      id: '1746594655609'
      position:
        x: 334
        y: 311
      positionAbsolute:
        x: 334
        y: 311
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: qwen2.5-vl-7b-instruct
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: 2a6e68ff-a605-4896-98bb-fbfc635c006d
          role: system
          text: "```xml\n<instruction>\n1. ä»»åŠ¡ç›®æ ‡ï¼šä»æä¾›çš„å›¾ç‰‡ä¸­æå–æ¶ˆè´¹æ˜ç»†ã€æ¶ˆè´¹é‡‘é¢å’Œæ¶ˆè´¹æ—¶é—´ï¼Œå¹¶æŒ‰ç…§æŒ‡å®šæ ¼å¼è¾“å‡ºã€‚\n\
            2. è¾“å…¥ï¼šç”¨æˆ·å°†æä¾›åŒ…å«æ¶ˆè´¹ä¿¡æ¯çš„å›¾ç‰‡ã€‚\n3. å¤„ç†æ­¥éª¤ï¼š\n   - ç¬¬ä¸€æ­¥ï¼šè¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—å†…å®¹ï¼Œç¡®ä¿æ‰€æœ‰æ–‡æœ¬ä¿¡æ¯è¢«å‡†ç¡®æå–ã€‚\n\
            \   - ç¬¬äºŒæ­¥ï¼šä»æå–çš„æ–‡æœ¬ä¸­ç­›é€‰å‡ºæ¶ˆè´¹æ˜ç»†ï¼ˆå¦‚å•†å“åç§°æˆ–æœåŠ¡æè¿°ï¼‰ã€æ¶ˆè´¹é‡‘é¢ï¼ˆé€šå¸¸ä¸ºæ•°å­—å½¢å¼ï¼Œå¯èƒ½å¸¦æœ‰è´§å¸ç¬¦å·ï¼‰å’Œæ¶ˆè´¹æ—¶é—´ï¼ˆæ—¥æœŸæˆ–æ—¶é—´æˆ³ï¼‰ã€‚\n\
            \   - ç¬¬ä¸‰æ­¥ï¼šå°†æå–çš„ä¿¡æ¯æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æ•´ç†ï¼š\n     - æ¶ˆè´¹æ˜ç»†ï¼š[å…·ä½“æ¶ˆè´¹é¡¹ç›®ï¼Œè¯·ç²¾ç®€å†…å®¹ï¼Œä¸è¶…è¿‡10ä¸ªå­—]\n     -\
            \ æ¶ˆè´¹é‡‘é¢ï¼š[é‡‘é¢æ•°å­—ï¼Œä¸å«è´§å¸ç¬¦å·]\n     - æ¶ˆè´¹æ—¶é—´ï¼š[å¹´-æœˆ-æ—¥ï¼Œä¸¾ä¾‹ï¼š2025-05-05]\n   - ç¬¬å››æ­¥ï¼šç¡®ä¿è¾“å‡ºå†…å®¹æ¸…æ™°ã€å‡†ç¡®ï¼Œä¸åŒ…å«ä»»ä½•XMLæ ‡ç­¾æˆ–å…¶ä»–æ— å…³ç¬¦å·ã€‚\n\
            4. è¾“å‡ºè¦æ±‚ï¼šä»…è¾“å‡ºæå–çš„ä¿¡æ¯ï¼Œæ ¼å¼ä¸ºçº¯æ–‡æœ¬ï¼Œæ¯é¡¹ä¿¡æ¯å ä¸€è¡Œï¼Œæ— éœ€é¢å¤–æ ‡æ³¨æˆ–è¯´æ˜ã€‚\n<example>\nè¾“å…¥ï¼šä¸€å¼ åŒ…å«â€œå’–å•¡ ï¿¥35.00\
            \ 2023-10-15 14:30:00â€çš„å›¾ç‰‡ã€‚\nè¾“å‡ºï¼š\næ¶ˆè´¹æ˜ç»†ï¼šå’–å•¡\næ¶ˆè´¹é‡‘é¢ï¼š35.00\næ¶ˆè´¹æ—¶é—´ï¼š2023-10-15\n\
            </example>\n\n<example>\nè¾“å…¥ï¼šä¸€å¼ åŒ…å«â€œåˆé¤å¥—é¤ ï¿¥120.50 2023-10-16 12:15:00â€çš„å›¾ç‰‡ã€‚\n\
            è¾“å‡ºï¼š\næ¶ˆè´¹æ˜ç»†ï¼šåˆé¤å¥—é¤\næ¶ˆè´¹é‡‘é¢ï¼š120.50\næ¶ˆè´¹æ—¶é—´ï¼š2023-10-16\n</example>\n\n\n<note>\n\
            1. å¦‚æœå›¾ç‰‡ä¸­çš„ä¿¡æ¯ä¸å®Œæ•´æˆ–æ¨¡ç³Šï¼Œè¯·æ˜ç¡®æ ‡æ³¨ç¼ºå¤±çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚â€œæ¶ˆè´¹æ—¶é—´ï¼šæ— æ³•è¯†åˆ«â€ã€‚\n2. ç¡®ä¿æ¶ˆè´¹é‡‘é¢ä»…ä¸ºæ•°å­—ï¼Œä¸åŒ…å«è´§å¸ç¬¦å·æˆ–å•ä½ã€‚å¹¶æ³¨æ„ï¼Œå…¶ä¸­å¯èƒ½å­˜åœ¨å…ˆç”¨åä»˜æ¬¾çš„è®¢å•ï¼Œè®¢å•é‡‘é¢å¯èƒ½ä¸º0.ä½†ä¸€å®šä¼šæ ‡æ³¨æœ€ç»ˆä»˜æ¬¾çš„é‡‘é¢ï¼Œ\
            \ è¯·è¾“å‡ºæœ€ç»ˆä»˜æ¬¾çš„é‡‘é¢\n3. æ¶ˆè´¹æ—¶é—´çš„æ ¼å¼åº”ç»Ÿä¸€ä¸ºâ€œå¹´-æœˆ-æ—¥â€ï¼Œè‹¥åŸå§‹æ ¼å¼ä¸åŒï¼Œè¯·è½¬æ¢ä¸ºè¯¥æ ¼å¼ã€‚\n4. è¾“å‡ºæ—¶æ— éœ€æ·»åŠ ä»»ä½•æ— å…³æ–‡æœ¬å†…å®¹ã€‚"
        selected: false
        structured_output_enabled: false
        title: è¯†åˆ«å›¾ç‰‡å†…å®¹
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: true
      height: 90
      id: '1746595346612'
      position:
        x: 1550
        y: 405
      positionAbsolute:
        x: 1550
        y: 405
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: è®°è´¦ç›¸å…³
        - id: '2'
          name: è®°è´¦æ— å…³
        desc: ''
        instruction: 'åˆ¤æ–­ä¼ å…¥ä¿¡æ¯ï¼šå¦‚æœåŒ…å«æµæ°´çš„æ˜ç»†ã€é‡‘é¢ã€æ—¥æœŸï¼Œåˆ™åˆ¤å®šä¸ºåˆ†ç±»1ï¼šè®°è´¦ç›¸å…³ï¼›

          å¦åˆ™åˆ¤æ–­ä¸è®°è´¦æ— å…³ã€‚'
        instructions: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: Qwen/Qwen2.5-32B-Instruct
          provider: langgenius/siliconflow/siliconflow
        query_variable_selector:
        - '1746550371697'
        - output
        selected: false
        title: åˆ¤æ–­æ˜¯å¦ä¸è®°è´¦ä¿¡æ¯æœ‰å…³
        topics: []
        type: question-classifier
        vision:
          enabled: false
      height: 172
      id: '1746597069745'
      position:
        x: 2158
        y: 311
      positionAbsolute:
        x: 2158
        y: 311
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -2401.9999999999995
      y: 86
      zoom: 0.7
