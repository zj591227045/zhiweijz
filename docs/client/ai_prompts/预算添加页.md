# 预算添加页

## 页面描述
预算添加页面用于创建新的通用预算，包括基本信息、账本选择、时间设置、结转设置和分类预算设置。用户可以在此页面设置新预算的各项参数，并保存创建。

## 页面结构
1. 顶部导航栏：包含返回按钮、页面标题"添加预算"和保存按钮
2. 预算类型选择：显示通用预算类型信息
3. 账本选择：选择预算所属的账本（个人账本或家庭账本）
4. 基本信息：包含预算名称、金额和周期
5. 时间设置：包含开始日期和结束日期（对于有期限的预算）
6. 结转设置：是否启用结转功能（对于周期性预算）
7. 分类预算设置：是否启用分类预算，以及各个分类的预算金额

## 数据模型
预算添加数据模型包含以下关键字段：
- name: 预算名称
- amount: 预算金额
- period: 预算周期（MONTHLY, YEARLY, UNLIMITED）
- budgetType: 预算类型（固定为GENERAL）
- accountBookId: 账本ID
- startDate: 开始日期
- endDate: 结束日期
- rollover: 是否启用结转
- enableCategoryBudget: 是否启用分类预算
- categoryBudgets: 分类预算列表，每个分类预算包含：
  - categoryId: 分类ID
  - amount: 预算金额

## 交互逻辑
1. 点击返回按钮，返回上一页（预算列表页）
2. 点击保存按钮，创建预算并返回预算列表页
3. 选择账本，切换预算所属的账本
4. 选择预算周期，根据周期显示或隐藏相关设置
   - 选择"无期限"时，隐藏结束日期和结转设置
   - 选择"月度"或"年度"时，显示结束日期和结转设置
5. 切换结转开关，启用或禁用结转功能
6. 切换分类预算开关，显示或隐藏分类预算设置
7. 修改分类预算金额，自动更新已分配金额和剩余可分配金额

## 业务规则
1. 只能创建通用预算，个人预算由系统自动创建
2. 预算名称不能为空
3. 预算金额必须大于0
4. 开始日期必须早于结束日期（对于有期限的预算）
5. 分类预算总额不能超过预算总额
6. 保存时验证所有输入是否有效

## 页面样式
1. 使用表单布局，清晰展示各个设置项
2. 使用卡片式布局展示预算类型选项
3. 使用选项卡或单选按钮选择账本
4. 使用下拉菜单选择预算周期
5. 使用日期选择器选择日期
6. 使用开关控件启用或禁用功能
7. 使用数字输入框输入金额，带有货币符号
8. 分类预算列表使用图标和颜色区分不同分类
9. 响应式设计，适配不同屏幕尺寸

## API接口
1. POST /api/budgets - 创建新预算
2. GET /api/account-books - 获取账本列表
3. GET /api/categories - 获取分类列表（用于分类预算设置）

## 注意事项
1. 确保页面加载时显示加载状态
2. 保存前验证所有输入是否有效，显示适当的错误提示
3. 确保金额格式统一，使用千分位分隔符和两位小数
4. 确保日期格式统一，使用本地化日期格式
5. 保存成功后显示成功提示，并返回预算列表页
6. 处理保存失败的情况，显示错误提示并允许用户重试
