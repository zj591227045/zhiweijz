# 只为记账 v0.9.0 版本更新日志

## 🎉 v0.9.0 重大更新

### 功能更新
- 🗄️ **统一计划任务调度器**: 整合所有计划任务，集成统一的计划任务调度器，提升系统稳定性
- 📊 **仪表盘无限加载**: 仪表盘页面的记账记录支持无限加载，提升大数据浏览体验
- ⬆️ **一键返回顶部**: 为仪表盘页面添加快捷按钮，一键返回顶部，改善用户体验
- 💾 **自动备份功能**: 在计划任务中增加后端数据库以及对象存储一键备份功能
- 🔧 **系统监控增强**: 完善系统监控指标，提供更全面的健康状态检查
- 📱 **移动端优化**: 全面优化移动端性能和用户体验
- 🎨 **界面美化**: 优化多个页面的视觉效果和交互体验
- 🚀 **性能提升**: 整体性能优化，减少加载时间和响应延迟

### 问题修复
- 🗑️ **过期用户删除**: 修复过期删除注销用户失败的问题，确保用户数据管理的准确性
- 🎨 **预算组件样式**: 修复查看全部记录后，仪表盘页面的预算执行情况组件样式问题
- 📱 **iOS底部导航**: 修复iOS底部导航栏没有固定在屏幕底部的问题
- 📈 **收支趋势异常**: 修复统计页面中的收支趋势显示不正常的问题
- 🏷️ **标签添加失败**: 修复添加标签失败的问题
- 📋 **预算分摊交互**: 修复多人预算分摊需要点击2次才能打开的问题
- 🔄 **描述信息同步**: 修复描述信息更新后，列表的描述信息不自动刷新的问题
- ✏️ **分类描述更新**: 修复修改分类后，描述修改不成功的问题
- 👥 **预算结转记录**: 修复预算结转记录显示了全部家庭成员的结转记录，并且没有显示名称的问题
- 🔄 **分类选择器消失**: 修复编辑记账时切换收入/支出时，分类选择器消失的问题

## 升级说明

### 升级步骤

```bash
# 1. 获取最新代码
cd zhiweijz
git pull

# 2. 备份数据库（可选但推荐）
cp scripts/database/db_backup/config.conf.template scripts/database/db_backup/config.env
# 编辑配置文件，设置数据库用户名和密码
vim scripts/database/db_backup/config.env
./scripts/database/db_backup/backup.sh full

# 3. 拉取最新docker镜像并更新
cd docker
docker-compose -p zhiweijz pull
docker-compose -p zhiweijz up -d
```

### 重要提醒
- 整合统一计划任务调度器，显著提升系统稳定性
- 仪表盘记账记录支持无限加载，优化大数据量浏览体验
- 新增一键返回顶部功能，提升用户操作便利性
- 集成自动备份功能，支持数据库和对象存储一键备份
- 修复10个关键问题，包括用户删除、UI样式、统计异常等
- 建议在升级前备份数据库

## 技术改进

### 计划任务调度系统
- 实现统一的计划任务调度器
- 支持任务优先级和并发控制
- 提供任务执行状态监控
- 增加任务失败重试机制

### 仪表盘体验优化
- 实现无限滚动加载机制
- 添加返回顶部快捷按钮
- 优化大数据量渲染性能
- 改进用户交互反馈

### 数据备份系统
- 自动备份数据库到对象存储
- 支持定时备份和手动备份
- 提供备份恢复功能
- 备份数据加密存储

### 移动端适配
- 修复iOS底部导航固定问题
- 优化移动端触摸交互
- 改进移动端页面布局
- 提升移动端响应速度

## 新功能详解

### 统一计划任务调度器
- 集成所有定时任务到统一调度器
- 支持任务依赖关系管理
- 提供任务执行日志和监控
- 支持动态任务配置和管理

### 仪表盘无限加载
- 实现虚拟滚动技术
- 支持按需加载记账记录
- 优化内存使用和性能
- 提供流畅的滚动体验

### 一键返回顶部
- 在仪表盘页面添加浮动按钮
- 快速返回页面顶部
- 支持平滑滚动动画
- 适配移动端触摸操作

### 自动备份功能
- 定时自动备份数据库
- 支持增量备份和全量备份
- 备份数据压缩和加密
- 提供备份状态监控和通知

## 性能优化

### 前端性能
- 优化组件渲染性能
- 减少不必要的重新渲染
- 实现数据缓存机制
- 提升页面加载速度

### 后端性能
- 优化数据库查询性能
- 实现查询结果缓存
- 减少API响应时间
- 提升并发处理能力

### 移动端性能
- 优化图片加载和显示
- 减少应用启动时间
- 改善触摸响应延迟
- 提升滚动和动画流畅度

## 安全性增强

### 数据安全
- 加强备份数据加密
- 改进用户权限验证
- 优化敏感数据处理
- 增强API安全防护

### 系统稳定性
- 完善错误处理机制
- 增加系统监控告警
- 优化内存使用管理
- 提升异常恢复能力