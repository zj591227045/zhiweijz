# ğŸ§ª åªä¸ºè®°è´¦ - å®Œæ•´åŠŸèƒ½æµ‹è¯•æŒ‡å—

## ğŸ¯ æ¦‚è¿°

è¿™å¥—å®Œæ•´çš„æµ‹è¯•è„šæœ¬ç³»ç»Ÿç¡®ä¿åœ¨æ›´æ–°å‰åç«¯ä»£ç æ—¶ï¼Œæ€»æ˜¯èƒ½å¤ŸéªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œé¿å…æ–°ç‰ˆæœ¬ç ´åç°æœ‰åŠŸèƒ½ã€‚

## âš¡ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒæ£€æµ‹å’ŒæŒ‡å—

```bash
# æ£€æµ‹å½“å‰ç¯å¢ƒå¹¶è·å–å¯åŠ¨å»ºè®®
npm run test:guide
```

### 2. éªŒè¯æµ‹è¯•ç¯å¢ƒ

```bash
# è¿è¡Œç¯å¢ƒæ£€æŸ¥
node scripts/demo-tests.js
```

### 3. å¿«é€Ÿå¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ï¼ˆ1-2åˆ†é’Ÿï¼‰
npm run test:health
```

### 4. å®Œæ•´åŠŸèƒ½éªŒè¯

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆ15-30åˆ†é’Ÿï¼‰
npm run test:full
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚è¯¦è§£

### ğŸ“‹ å„æµ‹è¯•çš„ç¯å¢ƒä¾èµ–

| æµ‹è¯•å‘½ä»¤ | éœ€è¦æ•°æ®åº“ | éœ€è¦åç«¯ | éœ€è¦å‰ç«¯ | è‡ªåŠ¨å¯åŠ¨æœåŠ¡ |
|----------|------------|----------|----------|--------------|
| `npm run test:health` | âœ… | âŒ | âŒ | âŒ |
| `npm run test:backend-api` | âœ… | âœ… | âŒ | âŒ |
| `npm run test:frontend` | âŒ | âŒ | âŒ | âœ… å‰ç«¯ |
| `npm run test:e2e` | âœ… | âŒ | âŒ | âœ… å‰åç«¯ |
| `npm run test:regression` | âœ… | âŒ | âŒ | âœ… å‰åç«¯ |
| `npm run test:full` | âœ… | âŒ | âŒ | âœ… å‰åç«¯ |

### ğŸš€ æ¨èçš„å¯åŠ¨æ–¹æ¡ˆ

#### æ–¹æ¡ˆAï¼šæœ€ç®€å•ï¼ˆæ¨èæ–°æ‰‹ï¼‰
```bash
# 1. å¯åŠ¨æ•°æ®åº“
docker-compose up -d postgres

# 2. è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆè‡ªåŠ¨å¯åŠ¨å‰åç«¯ï¼‰
npm run test:full
```

#### æ–¹æ¡ˆBï¼šå¼€å‘ç¯å¢ƒï¼ˆæ¨èå¼€å‘è€…ï¼‰
```bash
# 1. å¯åŠ¨åç«¯
cd server && npm run dev

# 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd apps/web && npm run dev

# 3. è¿è¡Œç‰¹å®šæµ‹è¯•ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run test:backend-api
npm run test:frontend
```

#### æ–¹æ¡ˆCï¼šDockerç¯å¢ƒ
```bash
# 1. å¯åŠ¨DockeræœåŠ¡
cd docker && ./start.sh

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
export BACKEND_URL=http://localhost:8080

# 3. è¿è¡ŒAPIæµ‹è¯•
npm run test:backend-api
```

## ğŸ“‹ æµ‹è¯•è„šæœ¬è¯¦æƒ…

### ğŸ¯ ä¸»è¦æµ‹è¯•å‘½ä»¤

| å‘½ä»¤ | ç”¨é€” | è€—æ—¶ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| `npm run test:health` | ç³»ç»Ÿå¥åº·æ£€æŸ¥ | 1-2åˆ†é’Ÿ | æ—¥å¸¸å¼€å‘ã€å¿«é€ŸéªŒè¯ |
| `npm run test:backend-api` | åç«¯APIæµ‹è¯• | 3-5åˆ†é’Ÿ | åç«¯ä»£ç æ›´æ–°å |
| `npm run test:frontend` | å‰ç«¯åŠŸèƒ½æµ‹è¯• | 5-10åˆ†é’Ÿ | å‰ç«¯ä»£ç æ›´æ–°å |
| `npm run test:e2e` | ç«¯åˆ°ç«¯æµ‹è¯• | 10-15åˆ†é’Ÿ | é‡è¦åŠŸèƒ½æ›´æ–°å |
| `npm run test:regression` | å›å½’æµ‹è¯• | 20-40åˆ†é’Ÿ | å‘å¸ƒå‰å®Œæ•´éªŒè¯ |
| `npm run test:full` | å®Œæ•´æµ‹è¯•å¥—ä»¶ | 15-30åˆ†é’Ÿ | é‡å¤§æ›´æ–°ã€å‘å¸ƒå‰ |

### ğŸ” æµ‹è¯•è¦†ç›–èŒƒå›´

#### åç«¯APIæµ‹è¯•
- âœ… ç”¨æˆ·è®¤è¯ï¼ˆæ³¨å†Œã€ç™»å½•ã€è®¤è¯æ£€æŸ¥ï¼‰
- âœ… è´¦æœ¬ç®¡ç†ï¼ˆåˆ›å»ºã€è·å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- âœ… åˆ†ç±»ç®¡ç†ï¼ˆè·å–ã€åˆ›å»ºè‡ªå®šä¹‰åˆ†ç±»ï¼‰
- âœ… äº¤æ˜“ç®¡ç†ï¼ˆåˆ›å»ºã€è·å–ã€æ›´æ–°äº¤æ˜“è®°å½•ï¼‰
- âœ… é¢„ç®—ç®¡ç†ï¼ˆåˆ›å»ºã€è·å–é¢„ç®—ï¼‰
- âœ… ç»Ÿè®¡æ•°æ®ï¼ˆæ”¯å‡ºã€æ”¶å…¥ã€é¢„ç®—ç»Ÿè®¡ï¼‰

#### å‰ç«¯åŠŸèƒ½æµ‹è¯•
- âœ… é¡µé¢æ¸²æŸ“æµ‹è¯•ï¼ˆæ‰€æœ‰ä¸»è¦é¡µé¢ï¼‰
- âœ… TypeScriptç¼–è¯‘æ£€æŸ¥
- âœ… ä»£ç è§„èŒƒæ£€æŸ¥ï¼ˆESLintï¼‰
- âœ… æ„å»ºè¿‡ç¨‹æµ‹è¯•
- âœ… ä¾èµ–å®Œæ•´æ€§æ£€æŸ¥
- âœ… APIé›†æˆæµ‹è¯•

#### ç«¯åˆ°ç«¯æµ‹è¯•
- âœ… å®Œæ•´ç”¨æˆ·æ³¨å†Œæµç¨‹
- âœ… ç”¨æˆ·ç™»å½•æµç¨‹
- âœ… ä»ªè¡¨ç›˜è®¿é—®å’Œæ•°æ®æ˜¾ç¤º
- âœ… è´¦æœ¬ç®¡ç†å®Œæ•´æµç¨‹
- âœ… äº¤æ˜“è®°å½•ç®¡ç†æµç¨‹
- âœ… é¢„ç®—ç®¡ç†æµç¨‹

#### å¥åº·æ£€æŸ¥
- âœ… åç«¯APIè¿é€šæ€§
- âœ… æ•°æ®åº“è¿æ¥çŠ¶æ€
- âœ… å‰ç«¯æœåŠ¡çŠ¶æ€
- âœ… ç³»ç»Ÿèµ„æºä½¿ç”¨
- âœ… ä¾èµ–å®Œæ•´æ€§

## ğŸš€ ä½¿ç”¨åœºæ™¯

### ğŸ“ æ—¥å¸¸å¼€å‘

```bash
# å¿«é€ŸéªŒè¯ç³»ç»ŸçŠ¶æ€
npm run test:health

# éªŒè¯ç‰¹å®šåŠŸèƒ½
npm run test:backend-api  # åç«¯æ›´æ–°å
npm run test:frontend     # å‰ç«¯æ›´æ–°å
```

### ğŸ”„ ä»£ç æäº¤å‰

```bash
# éªŒè¯ç›¸å…³åŠŸèƒ½
npm run test:backend-api && npm run test:frontend
```

### ğŸš€ å‘å¸ƒå‰éªŒè¯

```bash
# å®Œæ•´å›å½’æµ‹è¯•
npm run test:regression
```

### ğŸ”§ é—®é¢˜æ’æŸ¥

```bash
# ç³»ç»Ÿè¯Šæ–­
npm run test:health

# è¯¦ç»†æµ‹è¯•
npm run test:full
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æ‰€æœ‰æµ‹è¯•éƒ½ä¼šç”Ÿæˆè¯¦ç»†æŠ¥å‘Šï¼Œä¿å­˜åœ¨ `test-reports/` ç›®å½•ï¼š

- **å®æ—¶è¾“å‡º**: å½©è‰²æ§åˆ¶å°æ—¥å¿—ï¼Œå®æ—¶æ˜¾ç¤ºæµ‹è¯•è¿›åº¦
- **JSONæŠ¥å‘Š**: è¯¦ç»†çš„æµ‹è¯•ç»“æœæ•°æ®
- **åŸºçº¿æ¯”è¾ƒ**: ä¸å†å²æ•°æ®å¯¹æ¯”ï¼Œæ£€æµ‹å›å½’
- **æ€§èƒ½ç›‘æ§**: å“åº”æ—¶é—´å’Œèµ„æºä½¿ç”¨æƒ…å†µ

## âš™ï¸ é…ç½®è¯´æ˜

### åŸºç¡€é…ç½® (`scripts/test-config.json`)

```json
{
  "backend": {
    "enabled": true,
    "timeout": 300000,
    "retries": 2
  },
  "frontend": {
    "enabled": true,
    "timeout": 180000
  },
  "e2e": {
    "enabled": true,
    "timeout": 600000
  }
}
```

### è‡ªå®šä¹‰ç¯å¢ƒå˜é‡

```bash
# è‡ªå®šä¹‰æœåŠ¡åœ°å€
export FRONTEND_URL=http://localhost:3003
export BACKEND_URL=http://localhost:3000

# å¯ç”¨è°ƒè¯•æ¨¡å¼
export DEBUG=true
export VERBOSE=true
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. ç«¯å£å†²çª
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000
lsof -i :3003

# åœæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
cd server
npx prisma db pull

# é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
npx prisma generate
```

#### 3. ä¾èµ–é—®é¢˜
```bash
# é‡æ–°å®‰è£…ä¾èµ–
npm install
cd server && npm install
cd apps/web && npm install
```

#### 4. æµ‹è¯•è¶…æ—¶
- å¢åŠ é…ç½®æ–‡ä»¶ä¸­çš„ `timeout` å€¼
- æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export DEBUG=true
export VERBOSE=true
npm run test:health
```

## ğŸ“ˆ æœ€ä½³å®è·µ

### 1. æµ‹è¯•é¢‘ç‡å»ºè®®

- **æ¯æ¬¡ä»£ç æ›´æ”¹å**: è¿è¡Œå¥åº·æ£€æŸ¥
- **åŠŸèƒ½å¼€å‘å®Œæˆå**: è¿è¡Œç›¸å…³åŠŸèƒ½æµ‹è¯•
- **ä»£ç æäº¤å‰**: è¿è¡Œåç«¯+å‰ç«¯æµ‹è¯•
- **åˆå¹¶åˆ†æ”¯å‰**: è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
- **å‘å¸ƒå‰**: è¿è¡Œå®Œæ•´å›å½’æµ‹è¯•

### 2. æµ‹è¯•ç­–ç•¥

#### å¼€å‘é˜¶æ®µ
```bash
npm run test:health              # å¿«é€ŸéªŒè¯
npm run test:backend-api         # åç«¯éªŒè¯
npm run test:frontend            # å‰ç«¯éªŒè¯
```

#### é›†æˆé˜¶æ®µ
```bash
npm run test:e2e                 # ç«¯åˆ°ç«¯éªŒè¯
```

#### å‘å¸ƒé˜¶æ®µ
```bash
npm run test:regression          # å®Œæ•´å›å½’æµ‹è¯•
```

### 3. æŒç»­é›†æˆ

å¯ä»¥å°†æµ‹è¯•è„šæœ¬é›†æˆåˆ°CI/CDæµæ°´çº¿ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
name: Test Suite
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: |
          npm install
          cd server && npm install
          cd ../apps/web && npm install
      
      - name: Run health check
        run: npm run test:health
      
      - name: Run regression tests
        run: npm run test:regression
```

## ğŸ¯ æµ‹è¯•ä»·å€¼

è¿™å¥—æµ‹è¯•ç³»ç»Ÿæä¾›ï¼š

1. **ğŸ›¡ï¸ è´¨é‡ä¿éšœ**: ç¡®ä¿æ–°ä»£ç ä¸ç ´åç°æœ‰åŠŸèƒ½
2. **âš¡ å¿«é€Ÿåé¦ˆ**: åŠæ—¶å‘ç°é—®é¢˜ï¼Œå‡å°‘è°ƒè¯•æ—¶é—´
3. **ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š**: æ¸…æ™°çš„æµ‹è¯•ç»“æœå’Œè¶‹åŠ¿åˆ†æ
4. **ğŸ”„ è‡ªåŠ¨åŒ–**: å‡å°‘æ‰‹åŠ¨æµ‹è¯•å·¥ä½œé‡
5. **ğŸ“ˆ æŒç»­æ”¹è¿›**: åŸºçº¿æ•°æ®å¸®åŠ©è¯†åˆ«æ€§èƒ½å›å½’

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚éœ€æ‰©å±•æµ‹è¯•åŠŸèƒ½ï¼š

1. åœ¨ç›¸åº”çš„æµ‹è¯•è„šæœ¬ä¸­æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹
2. æ›´æ–°é…ç½®æ–‡ä»¶ä»¥åŒ…å«æ–°çš„æµ‹è¯•é€‰é¡¹
3. æ›´æ–°æ–‡æ¡£è¯´æ˜æ–°åŠŸèƒ½
4. è¿è¡Œå®Œæ•´æµ‹è¯•ç¡®ä¿å…¼å®¹æ€§

---

**ğŸ’¡ æç¤º**: å®šæœŸè¿è¡Œè¿™äº›æµ‹è¯•è„šæœ¬ï¼Œå¯ä»¥å¤§å¤§æé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ï¼Œç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚
